# 想定読者
ログローテートを知らない人。  
ログローテートの概要を知っているが、どのように設定するかの詳細を知らない人。  

# ログローテートとは何か
Log： (実験・業務などの)記録  
Rotate：回転する、循環する、自転する、交替する  
→記録を循環させるソフトウエア。

# ログローテートの目的
ログを定期的に削除することで、ログの肥大化を防ぐことです。   
サーバで稼動している各種ソフトウエアは、ログを出力しています。  
・Linuxのシステムログ(syslog)  
・ミドルウエアログ  (apacheのアクセスログ、mysqlのログ)  

### ログローテションされないとどうなる？  
サーバのディスク領域を使いきり、ログが書き込めないことでサーバが機能停止する恐れがあります。 

# ログローテートするには
## ログローテートソフトウエア「logrotate」 を使おう！  
最近のLinuxではデフォルトで導入されている非常にメジャーなソフトウエア。  
もし、ない場合はyumやaptなどのツールで導入しましょう。  

# 設定してみよう
`/etc/logrotate.d/ ` 配下に、ソフトウエアや機能単位で設定ファイルを配置する形式がメジャーです。  

## ファイル名例
```
/etc/logrotate.d/apache
/etc/logrotate.d/nginx
/etc/logrotate.d/php-web
/etc/logrotate.d/php-api
```
## 設定できる項目

| 項目名 | 内容詳細 |
|:------|:--------|
| daily|毎日実行する|
|rotate [回数]|ローテーションする回数を指定|
|size [ファイルサイズ]|ログファイルが指定したファイルサイズ以上になったらローテーションする|
|postrotate〜endscript|記述されたコマンドをログローテーション後に実行|
|compress|ローテーションしたログをgzipで圧縮|

# 注意点
logrotateは、root権限で実行します。  
そのため、postrotate等でファイル削除コマンドやscriptを実行する場合には必ず検証環境で動作確認してください。  
不適切なスクリプトが実行された場合、最悪システムファイルが破損し、サーバがダウンします  

# 質疑応答


# おわり
ご清聴有難うございました。